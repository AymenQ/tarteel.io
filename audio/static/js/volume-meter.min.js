function createAudioMeter(a,b,c,d){var e=a.createScriptProcessor(512);return e.onaudioprocess=volumeAudioProcess,e.clipping=!1,e.lastClip=0,e.volume=0,e.clipLevel=b||.98,e.averaging=c||.95,e.clipLag=d||750,e.connect(a.destination),e.checkClipping=function(){return!!this.clipping&&(this.lastClip+this.clipLag<window.performance.now()&&(this.clipping=!1),this.clipping)},e.shutdown=function(){this.disconnect(),this.onaudioprocess=null},e}function volumeAudioProcess(a){for(var b,c=a.inputBuffer.getChannelData(0),d=c.length,e=0,f=0;f<d;f++)b=c[f],Math.abs(b)>=this.clipLevel&&(this.clipping=!0,this.lastClip=window.performance.now()),e+=b*b;var g=Math.sqrt(e/d);this.volume=Math.max(g,this.volume*this.averaging)}
