(function(a){'use strict';function b(b){var c=a.Deferred();return a.getJSON(b).done(c.resolve).fail(function(d,e,f){a.i18n.log('Error in loading messages from '+b+' Exception: '+f),c.resolve()}),c.promise()}var c=function(){this.messages={},this.sources={}};c.prototype={load:function(c,d){var e=null,f=null,g=[],h=this;if('string'==typeof c)return a.i18n.log('Loading messages from: '+c),f=b(c).done(function(a){h.set(d,a)}),f.promise();if(d)return h.set(d,c),a.Deferred().resolve();for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(d=e,g.push(h.load(c[e],d)));return a.when.apply(a,g)},set:function(b,c){this.messages[b]=this.messages[b]?a.extend(this.messages[b],c):c},get:function(a,b){return this.messages[a]&&this.messages[a][b]}},a.extend(a.i18n.messageStore,new c)})(jQuery);
