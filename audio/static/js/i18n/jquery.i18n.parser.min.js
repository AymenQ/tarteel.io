(function(a){'use strict';var b=function(b){this.options=a.extend({},a.i18n.parser.defaults,b),this.language=a.i18n.languages[String.locale]||a.i18n.languages['default'],this.emitter=a.i18n.parser.emitter};b.prototype={constructor:b,simpleParse:function(a,b){return a.replace(/\$(\d+)/g,function(a,c){var d=parseInt(c,10)-1;return b[d]===void 0?'$'+c:b[d]})},parse:function(b,c){return 0>b.indexOf('{{')?this.simpleParse(b,c):(this.emitter.language=a.i18n.languages[a.i18n().locale]||a.i18n.languages['default'],this.emitter.emit(this.ast(b),c))},ast:function(a){function b(a){return function(){var b,c;for(b=0;b<a.length;b++)if(c=a[b](),null!==c)return c;return null}}function c(a){var b,c,d=H,e=[];for(b=0;b<a.length;b++){if(c=a[b](),null===c)return H=d,null;e.push(c)}return e}function d(a,b){return function(){for(var c=H,d=[],e=b();null!==e;)d.push(e),e=b();return d.length<a?(H=c,null):d}}function e(b){var c=b.length;return function(){var d=null;return a.slice(H,H+c)===b&&(d=b,H+=c),d}}function f(b){return function(){var c=a.slice(H).match(b);return null===c?null:(H+=c[0].length,c[0])}}function g(){var a=d(1,y)();return null===a?null:a.join('')}function h(){var a=d(1,z)();return null===a?null:a.join('')}function i(){var a=c([r,s]);return null===a?null:a[1]}function j(){var a=c([t,u]);return null===a?null:['REPLACE',parseInt(a[1],10)-1]}function k(){var a,b=c([p,d(0,F)]);return null===b?null:(a=b[1],1<a.length?['CONCAT'].concat(a):a[0])}function l(){var a=c([B,q,j]);return null===a?null:[a[0],a[2]]}function m(){var a=c([B,q,F]);return null===a?null:[a[0],a[2]]}function n(){var a=c([C,A,D]);return null===a?null:a[1]}function o(){var a=d(0,E)();return null===a?null:['CONCAT'].concat(a)}var p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=0;if(p=e('|'),q=e(':'),r=e('\\'),s=f(/^./),t=e('$'),u=f(/^\d+/),v=f(/^[^{}[\]$\\]/),w=f(/^[^{}[\]$\\|]/),x=f(/^[^{}[\]$\s]/),b([i,x]),y=b([i,w]),z=b([i,v]),B=function(a,b){return function(){var c=a();return null===c?null:b(c)}}(f(/^[ !"$&'()*,./0-9;=?@A-Z^_`a-z~\x80-\xFF+-]+/),function(a){return a.toString()}),A=b([function(){var a=c([b([l,m]),d(0,k)]);return null===a?null:a[0].concat(a[1])},function(){var a=c([B,d(0,k)]);return null===a?null:[a[0]].concat(a[1])}]),C=e('{{'),D=e('}}'),E=b([n,j,h]),F=b([n,j,g]),G=o(),null===G||H!==a.length)throw new Error('Parse error at position '+H.toString()+' in input: '+a);return G}},a.extend(a.i18n.parser,new b)})(jQuery);
